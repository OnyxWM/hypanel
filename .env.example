# Hypanel Docker Configuration
# Copy this file to .env and edit as needed: cp .env.example .env

# =============================================================================
# AUTHENTICATION (REQUIRED)
# =============================================================================

# Authentication method: ENV (Docker default) or PAM
# For Docker, use ENV. For Linux installation, use PAM.
HYPANEL_AUTH_METHOD=ENV

# Option 1: Bcrypt password hash (RECOMMENDED for production)
# Generate a hash using one of these methods:
# 
# Method 1: Using Node.js (if you have it installed):
#   node -e "const bcrypt = require('bcrypt'); bcrypt.hash('your-password', 10).then(h => console.log(h));"
#
# Method 2: Using the setup-docker.sh script (it will prompt for password)
#
# Method 3: Using Docker (if Node.js not available locally):
#   docker run --rm -it node:24-alpine sh -c "npm install bcrypt && node -e \"const bcrypt = require('bcrypt'); bcrypt.hash('your-password', 10).then(h => console.log(h));\""
#
# Method 4: Using the hypanel image CLI (recommended for Docker):
#   Interactive (prompts for password, no echo):
#     docker run --rm -it ghcr.io/onyxwm/hypanel:latest hypanel hash-password
#   Non-interactive:
#     docker run --rm ghcr.io/onyxwm/hypanel:latest hypanel hash-password --password 'your-strong-password'
#   Output is HYPANEL_PASSWORD_HASH=$2b$12$... â€” copy that line into this file.
#
# Uncomment and set your hash:
# HYPANEL_PASSWORD_HASH=$2b$12$YourGeneratedHashHere

# Option 1b: Bcrypt hash in a file (Docker secret or bind mount)
# Store the hash in a host file and mount it; Hypanel reads via HYPANEL_PASSWORD_HASH_FILE.
# Create the file (run from the directory that contains ./secrets). Use --entrypoint "" so
# the process runs as root and can write to the mount (the app normally runs as user hypanel):
#   mkdir -p secrets
#   docker run --rm -it --entrypoint "" -v "$(pwd)/secrets:/out" ghcr.io/OnyxWM/hypanel:latest hypanel hash-password --output /out/hypanel_password_hash
# docker-compose.yml mounts ./secrets/hypanel_password_hash as a secret at /run/secrets/hypanel_password_hash.
# Leave HYPANEL_PASSWORD_HASH empty when using the file; set HYPANEL_PASSWORD_HASH_FILE only if overriding the default path.
# HYPANEL_PASSWORD_HASH_FILE=/run/secrets/hypanel_password_hash  # default in compose

# Option 2: Plaintext password (FOR TESTING ONLY - NOT RECOMMENDED)
# Only use this for local development/testing. For production, use HYPANEL_PASSWORD_HASH above.
# Uncomment and set your password:
# HYPANEL_PASSWORD=your-password-here

# IMPORTANT: You must set one of: HYPANEL_PASSWORD_HASH, HYPANEL_PASSWORD_HASH_FILE (with file mounted), or HYPANEL_PASSWORD
# The application will fail to start if HYPANEL_AUTH_METHOD=ENV and none are set.

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================

# HTTP API server port (default: 3000)
PORT=3000

# WebSocket server port (default: 3001)
WS_PORT=3001

# Node.js environment (production or development)
NODE_ENV=production

# =============================================================================
# DATA PATHS (Optional - defaults shown)
# =============================================================================

# Database file path
DATABASE_PATH=/opt/hypanel/apps/backend/data/hypanel.db

# Directory for Hytale server instances
SERVERS_DIR=/opt/hypanel/apps/backend/servers

# Directory for application logs
LOGS_DIR=/opt/hypanel/apps/backend/logs

# Directory for server backups
BACKUP_DIR=/opt/hypanel/apps/backend/backup

# =============================================================================
# USER/GROUP (Unused with Docker named volumes)
# =============================================================================
# When using Docker named volumes (default), compose does not set "user:" and
# these are not used. Kept for reference only.

PUID=1000
PGID=1000

# =============================================================================
# NOTES
# =============================================================================
#
# 1. After editing this file, save it as .env (not .env.example)
# 2. The .env file is gitignored and will not be committed to version control
# 3. For security, never commit your .env file or share it publicly
# 4. To regenerate your password hash, use: hypanel hash-password (see Method 4 above),
#    the setup-docker.sh script, or one of the other methods described above
