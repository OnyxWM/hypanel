2026-01-16: Completed server persistence implementation
- Updated database schema with installState, lastError, jarPath, assetsPath, and serverRoot fields
- Implemented canonical server root at ~/hytale/<id> for hypanel user  
- Added proper ownership/permissions handling via chown/chmod
- Modified ServerManager to restore servers from database on daemon restart
- Tested database schema and server creation functionality
- All PRD steps for server persistence now passing

2026-01-17: Implemented Hytale server installation automation
- Created Installer.ts service class for hytale-downloader integration
- Added installServer method to ServerManager with state management
- Added POST /api/servers/:id/install API endpoint with proper error handling
- Added WebSocket events for real-time installation progress streaming
- Implemented install state machine (NOT_INSTALLED → INSTALLING → INSTALLED/FAILED)
- Added progress tracking with stage updates (queued → downloading → verifying → ready/failed)
- Added robust error handling and retry capability
- Implemented file verification for HytaleServer.jar and Assets.zip
- Prevented concurrent installations per server
- Added comprehensive logging throughout installation process
- TypeScript compilation successful with all type safety checks passing
- Addresses PRD requirement #2: Automate Hytale server installation using bundled official hytale-downloader

2026-01-17: Implemented server configuration management API
- Added PUT /api/servers/:id endpoint for updating server settings after creation
- Created updateServerConfig method in ServerManager with proper validation
- Modified ServerInstance.config to be mutable for runtime updates
- Enhanced database updateServerConfig function with partial update support
- Maintains consistency between database and filesystem config storage
- Supports updating name, IP, port, version, maxMemory, maxPlayers, and other properties
- Added proper error handling for non-existent servers
- TypeScript compilation successful with all type checks passing
- Addresses PRD requirement #3: Server configuration management

2026-01-17: Implemented install progress streaming via websocket
- Added InstallProgress and InstallState types to frontend TypeScript definitions
- Added installServer method to ApiClient for triggering installations
- Created InstallProgressDisplay component with progress bars and stage indicators
- Updated ServerCard to show install state, progress bars, and install/retry buttons
- Added install progress WebSocket event handling to ServersPage and DashboardPage
- Implemented real-time install progress updates with proper error handling
- Supports all install stages: queued, downloading, extracting, verifying, ready, failed
- UI displays install failures with actionable error messages and retry functionality
- WebSocket events properly update server state in real-time across all components
- TypeScript compilation successful with all type safety checks passing
- Addresses PRD requirement #4: Install progress streaming via websocket + UI states

2026-01-17: Implemented concurrent install prevention and idempotent installations
- Added database-based install locking with tryStartInstallation function for atomic operations
- Implemented atomic install state management to prevent race conditions across multiple clients
- Added install recovery logic during daemon startup to handle crashed installations
- Implemented safe retry logic with cleanup of partial installation artifacts
- Added clear error responses for concurrent install requests with actionable messages
- Removed redundant checks in ServerManager and rely on database locking for consistency
- Mark interrupted installations as FAILED with actionable error messages about daemon restart
- Ensure installations survive daemon restarts with proper state recovery and cleanup
- TypeScript compilation successful with all type safety checks passing
- Addresses PRD requirement #5: Prevent concurrent installs and make installs idempotent per server

2026-01-17: Implemented official Hytale server launch requirements
- Modified ServerInstance.start() to use stored jarPath and assetsPath from SQLite database
- Added verification for jarPath and assetsPath existence before starting servers
- Updated command construction to use proper Hytale launch format: java -jar HytaleServer.jar --assets <Assets.zip>
- Added support for optional --bind <ip:port> setting with default 0.0.0.0:port
- Enhanced error handling with actionable error messages for missing/invalid paths
- Replaced auto-detection logic with database-driven path management for reliability
- Improved logging to show jar/assets paths being used for better debugging
- Added verification that server installState is INSTALLED before allowing start
- TypeScript compilation successful with all type safety checks passing
- Addresses PRD requirement #6: Start/stop uses official launch requirements

2026-01-17: Implemented server config.json management with GUI editor
- Added GET/PUT /api/servers/:id/config endpoints for config.json management with proper validation
- Created ServerConfig React component with form validation, error handling, and real-time updates
- Added Config tab to ServerDetailsPage with comprehensive editing capabilities
- Implemented guardrails to prevent config changes while server is running for safety
- Support core Hytale config fields: ServerName, MOTD, Password, MaxPlayers, MaxViewRadius, LocalCompressionEnabled, Defaults.World/Defaults.GameMode
- Added atomic config file writing with temporary files to prevent corruption
- Include proper JSON validation and user-friendly error messages throughout the UI
- Created reusable Alert UI component for success/error notifications
- TypeScript compilation successful with all type safety checks passing
- Addresses PRD requirement #6: Config management: server-root config.json editor (read/write, validated JSON) per official manual

2026-01-17: Implemented world config management with full UI integration
- Added GET /api/servers/:id/worlds endpoint to discover worlds under universe/worlds/ directory
- Added GET/PUT /api/servers/:id/worlds/:world/config endpoints for world config.json management
- Created WorldList React component displaying discovered worlds with selection functionality
- Created WorldConfig React component for editing safe world configuration fields
- Added Worlds tab to ServerDetailsPage with responsive split-pane layout
- Implemented server-running guardrails preventing config changes during operation
- Added atomic config file writing using temp files and rename to prevent corruption
- Support editing IsPvpEnabled, IsFallDamageEnabled, IsGameTimePaused, IsSpawningNPC, Seed, SaveNewChunks, IsUnloadingChunks
- Comprehensive error handling for missing worlds/config files with actionable messages
- Backend enforces config write restrictions even if UI is bypassed
- TypeScript compilation successful for both backend and frontend components
- Addresses PRD requirement #7: World config management: universe/worlds/<world>/config.json editor (list worlds, read/write)

2026-01-17: Verified guardrails implementation for config file editing
- Confirmed UI blocks config changes when server is online/starting with clear messaging
- Verified backend rejects server config writes via PUT /api/servers/:id/config when server is running
- Verified backend rejects world config writes via PUT /api/servers/:id/worlds/:world/config when server is running
- ServerConfig component disables all form fields when server is not offline/stopping
- WorldConfig component disables all form fields when server is not offline/stopping
- Both components show clear alert messages explaining why changes are blocked
- Config writes succeed normally after server is stopped
- Backend enforcement ensures bypassing UI is not possible
- Addresses PRD requirement #8: Guardrails: enforce stop-before-edit for config files (backend authoritative)